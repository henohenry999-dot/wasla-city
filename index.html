<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆØµÙ„Ø© | Ø¨ÙˆØ§Ø¨Ø©  Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø¹Ø§ØµÙ…Ø©</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #1a2b48;       /* ÙƒØ­Ù„ÙŠ Ù…Ù„ÙƒÙŠ */
            --secondary: #27ae60;     /* Ø£Ø®Ø¶Ø± Ù†Ù‚ÙŠ */
            --gold: #d4af37;          /* Ø°Ù‡Ø¨ÙŠ ÙØ®Ù… */
            --gold-light: #f3e5ab;
            --bg: #f8f9fa;
            --dark: #2d3436;
            --white: #ffffff;
            --danger: #c0392b;
        }

        body { font-family: 'Cairo', sans-serif; margin: 0; background-color: var(--bg); color: var(--dark); padding-bottom: 80px; }
        a { text-decoration: none; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ --- */
        header { 
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%); 
            color: white; 
            padding: 25px 20px 40px; 
            border-bottom-left-radius: 40px; 
            border-bottom-right-radius: 40px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø±ÙˆØ¶ (Ticker) */
        .ticker-wrap { 
            position: fixed; top: 0; width: 100%; height: 35px; background: #000; z-index: 2000; display: none; align-items: center; 
            border-bottom: 2px solid var(--gold);
        }
        .ticker-head { background: var(--gold); color: #000; padding: 0 15px; height: 100%; display: flex; align-items: center; font-weight: bold; font-size: 0.85rem; }
        .ticker-content { color: #fff; white-space: nowrap; animation: ticker 30s linear infinite; font-size: 0.9rem; padding: 0 10px; font-weight: 600; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .nav-bar { display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 2; margin-top: 20px; }
        
        /* Ø§Ù„Ù„ÙˆØ¬Ùˆ ÙˆØ§Ù„Ø§Ø³Ù… */
        .brand { display: flex; align-items: center; gap: 10px; }
        .logo-icon { font-size: 2rem; color: var(--gold); text-shadow: 0 0 15px rgba(212,175,55,0.5); }
        .app-name { 
            font-family: 'Amiri', serif; font-size: 2.2rem; font-weight: 700; 
            background: linear-gradient(to bottom, #fff 0%, #d4af37 100%); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
        }

        .btn-add { 
            background: linear-gradient(45deg, var(--gold), #f1c40f); color: #0f172a; 
            padding: 8px 18px; border-radius: 50px; font-weight: bold; font-size: 0.9rem; 
            box-shadow: 0 4px 15px rgba(212,175,55,0.4); transition: 0.3s; 
            display: flex; align-items: center; gap: 5px;
        }

        /* --- Ø§Ù„Ø¨Ø­Ø« --- */
        .search-wrapper { margin: -30px 20px 20px; background: white; padding: 10px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); display: flex; gap: 10px; position: relative; z-index: 10; }
        .search-box { flex: 1; border: none; outline: none; padding: 5px 10px; font-family: 'Cairo'; font-size: 1rem; }

        /* --- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
        .main-tabs { display: flex; justify-content: center; gap: 10px; margin-top: 20px; padding: 0 10px; flex-wrap: wrap; }
        .tab-btn { 
            background: rgba(255,255,255,0.08); color: #bdc3c7; border: 1px solid rgba(255,255,255,0.1); 
            padding: 8px 16px; border-radius: 15px; cursor: pointer; transition: 0.3s; font-size: 0.9rem;
            display: flex; flex-direction: column; align-items: center; gap: 5px; min-width: 70px;
        }
        .tab-btn i { font-size: 1.2rem; }
        .tab-btn.active { background: var(--white); color: var(--primary); transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .tab-btn.active i { color: var(--gold); }

        /* --- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© --- */
        .categories-wrapper { overflow-x: auto; white-space: nowrap; padding: 0 20px 15px; scrollbar-width: none; display: none; }
        .categories-wrapper.show { display: block; }
        .cat-chip { 
            display: inline-block; padding: 8px 18px; background: white; border: 1px solid #eee; 
            border-radius: 50px; margin-left: 8px; cursor: pointer; transition: 0.3s; 
            color: #555; font-weight: 600; font-size: 0.9rem; 
        }
        .cat-chip.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* --- Ø§Ù„Ø´Ø¨ÙƒØ© --- */
        .container { padding: 0 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(100%, 1fr)); gap: 15px; }
        @media (min-width: 600px) { .container { grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); } }

        .card { 
            background: white; border-radius: 18px; padding: 12px; display: flex; gap: 15px; position: relative; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); transition: 0.3s; border: 1px solid transparent; overflow: hidden; cursor: pointer;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.08); }

        /* Ù…Ù…ÙŠØ² */
        .card.featured { border: 1px solid var(--gold); background: linear-gradient(to right, #fffff0, #fff); }
        .badge-crown { position: absolute; top: 0; left: 0; background: var(--gold); color: #000; font-size: 0.7rem; padding: 3px 10px; border-bottom-right-radius: 12px; font-weight: bold; }

        /* Ù…ØªØ§Ø­ */
        .badge-live { position: absolute; top: 12px; right: 12px; display: flex; align-items: center; gap: 5px; font-size: 0.7rem; color: var(--secondary); font-weight: bold; background: rgba(39, 174, 96, 0.1); padding: 2px 8px; border-radius: 10px; }
        .dot { width: 8px; height: 8px; background: var(--secondary); border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% {box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7);} 70% {box-shadow: 0 0 0 6px rgba(46, 204, 113, 0);} 100% {box-shadow: 0 0 0 0 rgba(46, 204, 113, 0);} }

        /* Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒØ§Ø±Øª */
        .offer-tag { display: block; color: var(--danger); font-size: 0.75rem; font-weight: bold; margin-top: 5px; }

        .card-img { width: 90px; height: 90px; border-radius: 12px; object-fit: cover; background: #f1f2f6; flex-shrink: 0; border: 1px solid #eee; }
        .card-info { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .card-info h3 { margin: 0 0 5px; font-size: 1.05rem; color: var(--primary); font-weight: 700; line-height: 1.3; }
        .sub-cat { font-size: 0.8rem; color: #7f8c8d; display: flex; align-items: center; gap: 5px; }

        .card-actions { margin-top: 10px; display: flex; gap: 8px; }
        .act-btn { width: 35px; height: 35px; border-radius: 10px; display: flex; align-items: center; justify-content: center; transition: 0.2s; font-size: 1rem; border: 1px solid rgba(0,0,0,0.05); }
        .act-call { background: #f0f4f8; color: var(--primary); }
        .act-wa { background: #e8f5e9; color: var(--secondary); }
        .act-loc { background: #fffcf5; color: #f39c12; }

        /* Ù„ÙˆØ¯ÙŠÙ†Ø¬ */
        .loading { text-align: center; padding: 50px; grid-column: 1/-1; color: #bdc3c7; }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; backdrop-filter: blur(5px); overflow-y: auto; }
        .modal-box { background: white; margin: 10% auto; width: 92%; max-width: 500px; border-radius: 20px; overflow: hidden; position: relative; animation: slideUp 0.4s; }
        @keyframes slideUp { from {transform:translateY(100px);opacity:0} to {transform:translateY(0);opacity:1} }

        .fab { position: fixed; bottom: 25px; left: 25px; background: #25D366; color: white; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4); z-index: 100; transition: 0.3s; }
        footer { text-align: center; color: #b2bec3; padding: 30px; font-size: 0.85rem; margin-top: 20px; }
    </style>
</head>
<body>

<div class="ticker-wrap" id="ticker">
    <div class="ticker-head">âš¡ Ø¹Ø±ÙˆØ¶</div>
    <div class="ticker-content" id="tickerTxt"></div>
</div>

<header>
    <div class="nav-bar">
        <div class="brand">
            <i class="fas fa-map-location-dot logo-icon"></i>
            <span class="app-name">ÙˆØµÙ„Ø©</span>
        </div>
        <a href="https://forms.gle/iGmmzXMt9amqkepu7" target="_blank" class="btn-add">
            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ©
        </a>
    </div>
    
    <div class="main-tabs">
        <div class="tab-btn active" onclick="setMain('all', this)"><i class="fas fa-th-large"></i><small>Ø§Ù„ÙƒÙ„</small></div>
        <div class="tab-btn" onclick="setMain('comm', this)"><i class="fas fa-store"></i><small>Ø®Ø¯Ù…Ø§Øª</small></div>
        <div class="tab-btn" onclick="setMain('gov', this)"><i class="fas fa-landmark"></i><small>Ø­ÙƒÙˆÙ…ÙŠ</small></div>
        <div class="tab-btn" onclick="setMain('worship', this)"><i class="fas fa-mosque"></i><small>Ø¹Ø¨Ø§Ø¯Ø©</small></div>
    </div>
</header>

<div class="search-wrapper">
    <input type="text" id="search" class="search-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† (Ù…Ø·Ø¹Ù…ØŒ Ø³Ø¨Ø§ÙƒØŒ ØµÙŠØ¯Ù„ÙŠØ©)...">
    <i class="fas fa-search" style="color:#bdc3c7;"></i>
</div>

<div id="subCats" class="categories-wrapper show">
    <div class="cat-chip active" onclick="setSub('all', this)">Ø§Ù„ÙƒÙ„</div>
    <div class="cat-chip" onclick="setSub('food', this)">ğŸ½ï¸ Ù…Ø·Ø§Ø¹Ù…</div>
    <div class="cat-chip" onclick="setSub('market', this)">ğŸ›’ Ù…Ø§Ø±ÙƒØª</div>
    <div class="cat-chip" onclick="setSub('medical', this)">ğŸ©º ØµØ­Ø©</div>
    <div class="cat-chip" onclick="setSub('maintenance', this)">ğŸ”§ ØµÙŠØ§Ù†Ø©</div>
    <div class="cat-chip" onclick="setSub('transport', this)">ğŸšŒ Ù†Ù‚Ù„</div>
    <div class="cat-chip" onclick="setSub('education', this)">ğŸ“ ØªØ¹Ù„ÙŠÙ…</div>
    <div class="cat-chip" onclick="setSub('fashion', this)">ğŸ‘— Ø£Ø²ÙŠØ§Ø¡</div>
</div>

<div class="container" id="grid">
    <div class="loading"><i class="fas fa-circle-notch fa-spin fa-2x"></i><br><br>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
</div>

<a href="https://wa.me/?text=Ø¯Ù„ÙŠÙ„ ÙˆØµÙ„Ø© - Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„" class="fab"><i class="fab fa-whatsapp"></i></a>

<footer><p>Â© 2025 ÙˆØµÙ„Ø© - Ø¨ÙˆØ§Ø¨ØªÙƒ Ù„Ù„Ø¹Ø§ØµÙ…Ø© â¤ï¸</p></footer>

<div id="modal" class="modal" onclick="if(event.target==this)closeM()">
    <div class="modal-box">
        <span onclick="closeM()" style="position:absolute; top:15px; left:15px; background:rgba(0,0,0,0.6); color:white; width:32px; height:32px; text-align:center; line-height:32px; border-radius:50%; cursor:pointer; z-index:10; font-size:1.2rem;">Ã—</span>
        <img id="mImg" src="" style="width:100%; height:220px; object-fit:cover;">
        <div style="padding:25px;">
            <div style="display:flex; justify-content:space-between; align-items:start;">
                <h2 id="mName" style="margin:0; color:var(--primary); font-family:'Amiri'; font-size:1.8rem;"></h2>
                <div id="mLive" style="display:none;" class="badge-live"><div class="dot"></div> Ù…ØªØ§Ø­</div>
            </div>
            
            <p id="mSub" style="color:#7f8c8d; font-size:0.9rem; margin:5px 0;"></p>
            
            <div id="mOffer" style="background:#fff0f0; color:#c0392b; padding:12px; border-radius:12px; margin:15px 0; display:none; border:1px dashed #e74c3c;">
                <i class="fas fa-bullhorn"></i> <b>Ø¹Ø±Ø¶ Ø®Ø§Øµ:</b> <span id="mOfferTxt"></span>
            </div>

            <p id="mDesc" style="color:#2d3436; line-height:1.7; font-size:1rem; margin:15px 0;"></p>
            
            <a id="mLoc" href="#" target="_blank" style="display:block; background:#fffcf0; padding:12px; text-align:center; border-radius:12px; margin-bottom:20px; color:#f39c12; font-weight:bold; border:1px solid #f1c40f; text-decoration:none;">
                <i class="fas fa-location-dot"></i> Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù…ÙˆÙ‚Ø¹ (Google Maps)
            </a>

            <div style="display:flex; gap:12px;">
                <a id="mCall" href="#" class="btn-add" style="flex:1; justify-content:center; background:var(--primary); color:white; height:45px;"><i class="fas fa-phone"></i> Ø§ØªØµØ§Ù„</a>
                <a id="mWa" href="#" class="btn-add" style="flex:1; justify-content:center; background:var(--secondary); color:white; height:45px;"><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script>
    // âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§
    const sheetID = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQxk-tGJ65-hOGtlnVUHDmDUohw1zFIFLDlIng-OlmH35mti_kqInGBCl3gNpUUeL9j5VRMx_x7A8bn/pub?gid=965965865&single=true&output=csv";
    const proxy = "https://api.allorigins.win/raw?url=" + encodeURIComponent(sheetID);

    let db = [], mainF = 'all', subF = 'all';

    function fixImg(u) {
        if(!u || u.length<5) return 'https://via.placeholder.com/400x250?text=WASLA';
        let id = u.match(/id=([a-zA-Z0-9_-]+)/) || u.match(/\/d\/([a-zA-Z0-9_-]+)/);
        // Ø·Ù„Ø¨ ØµÙˆØ±Ø© Ù…ØªÙˆØ³Ø·Ø© (s600) Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        return id ? `https://lh3.googleusercontent.com/d/${id[1]}=s600` : u;
    }

    function init() {
        Papa.parse(proxy, { download:true, header:false, skipEmptyLines:true, complete: (res) => {
            // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†)
            const rows = res.data.slice(1);
            
            // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Mapping) - A=0, B=1 ...
            db = rows.map((r, i) => ({
                id: i,
                name: r[1],          // B: Ø§Ù„Ø§Ø³Ù…
                type: getType(r[2]), // C: Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
                cat: getCat(r[2]),   // C: Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ (Ù„Ù„ÙÙ„ØªØ±Ø©)
                sub: r[3],           // D: Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ (Ù„Ù„Ø¹Ø±Ø¶)
                area: r[4],          // E: Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
                desc: r[5],          // F: Ø§Ù„ÙˆØµÙ
                ph: r[6],            // G: Ù…ÙˆØ¨Ø§ÙŠÙ„
                wa: r[7],            // H: ÙˆØ§ØªØ³Ø§Ø¨
                img: fixImg(r[8]),   // I: ØµÙˆØ±Ø©
                loc: r[9],           // J: Ù„ÙˆÙƒÙŠØ´Ù†
                offer: r[10],        // K: Ø¹Ø±Ø¶
                live: (r[11] && (r[11].includes('TRUE') || r[11].includes('Ù†Ø¹Ù…'))), // L: Ù…ØªØ§Ø­
                feat: (r[12] && (r[12].includes('TRUE') || r[12].includes('Ù†Ø¹Ù…')))  // M: Ù…Ù…ÙŠØ²
            })).filter(x => x.name);
            
            setupTicker();
            render();
        }});
    }

    function getType(t) { 
        if(!t) return 'comm'; 
        if(t.includes('Ø­ÙƒÙˆÙ…ÙŠ')) return 'gov'; 
        if(t.includes('Ø¹Ø¨Ø§Ø¯Ø©')) return 'worship'; 
        return 'comm'; 
    }
    
    function getCat(t) {
        if(!t) return 'other';
        const s = t.trim();
        if(s.includes('Ù…Ø·Ø§Ø¹Ù…')) return 'food';
        if(s.includes('Ù…Ø§Ø±ÙƒØª')) return 'market';
        if(s.includes('Ø·Ø¨')) return 'medical';
        if(s.includes('ØµÙŠØ§Ù†Ø©')) return 'maintenance';
        if(s.includes('ØªØ¹Ù„ÙŠÙ…')) return 'education';
        if(s.includes('Ù…ÙˆØ§ØµÙ„Ø§Øª')) return 'transport';
        if(s.includes('Ù…Ù„Ø§Ø¨Ø³') || s.includes('Ø£Ø²ÙŠØ§Ø¡')) return 'fashion';
        return 'other';
    }

    function setupTicker() {
        // Ø¬Ù…Ø¹ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ù† Ø§Ù„Ø¹Ù…ÙˆØ¯ K
        const offers = db.filter(x => x.offer && x.offer.length > 2).map(x => `ğŸ”¥ ${x.name}: ${x.offer}`);
        if(offers.length > 0) {
            document.getElementById('ticker').style.display = 'flex';
            const txt = offers.join(' Â Â Â  â€¢ Â Â Â  ') + ' Â Â Â  â€¢ Â Â Â  ' + offers.join(' Â Â Â  â€¢ Â Â Â  ');
            document.getElementById('tickerTxt').innerHTML = txt;
        }
    }

    function render() {
        const g = document.getElementById('grid');
        const s = document.getElementById('search').value.toLowerCase();
        g.innerHTML = '';

        const list = db.filter(x => {
            const mMatch = (mainF === 'all') ? true : (mainF === x.type);
            const sMatch = (mainF !== 'comm') ? true : (subF === 'all' || subF === x.cat);
            const txtMatch = x.name.toLowerCase().includes(s) || (x.desc && x.desc.toLowerCase().includes(s));
            return mMatch && sMatch && txtMatch;
        });

        // ØªØ±ØªÙŠØ¨: Ø§Ù„Ù…ØªØ§Ø­ > Ø§Ù„Ù…Ù…ÙŠØ² > Ø§Ù„Ø¹Ø§Ø¯ÙŠ
        list.sort((a,b) => (b.live - a.live) || (b.feat - a.feat));

        if(list.length === 0) {
            g.innerHTML = '<div style="text-align:center; grid-column:1/-1; padding:40px; color:#95a5a6;"><i class="fas fa-box-open fa-3x"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©</p></div>';
            return;
        }

        list.forEach(x => {
            const crown = x.feat ? '<span class="badge-crown"><i class="fas fa-crown"></i> Ù…Ù…ÙŠØ²</span>' : '';
            const live = x.live ? '<span class="badge-live"><div class="dot"></div> Ù…ØªØ§Ø­</span>' : '';
            const offer = x.offer ? `<span class="offer-tag">ğŸ”¥ ${x.offer}</span>` : '';
            const cls = x.feat ? 'card featured' : 'card';
            
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙƒØ§Ø±Øª
            let btns = '';
            if(x.ph) btns += `<a href="tel:${x.ph}" class="act-btn act-call" onclick="event.stopPropagation()"><i class="fas fa-phone"></i></a>`;
            if(x.wa) btns += `<a href="https://wa.me/${x.wa}" class="act-btn act-wa" onclick="event.stopPropagation()"><i class="fab fa-whatsapp"></i></a>`;
            if(x.loc) btns += `<a href="${x.loc}" target="_blank" class="act-btn act-loc" onclick="event.stopPropagation()"><i class="fas fa-location-arrow"></i></a>`;

            g.innerHTML += `
            <div class="${cls}" onclick="openM(${x.id})">
                ${crown} ${live}
                <img src="${x.img}" class="card-img" referrerpolicy="no-referrer" loading="lazy">
                <div class="card-info">
                    <h3>${x.name}</h3>
                    <div class="sub-cat"><i class="fas fa-tag"></i> ${x.sub}</div>
                    ${offer}
                    <div class="card-actions">${btns}</div>
                </div>
            </div>`;
        });
    }

    // Modal
    window.openM = (id) => {
        const x = db.find(i => i.id === id);
        document.getElementById('mName').innerText = x.name;
        document.getElementById('mSub').innerHTML = `<span style="background:#eee; padding:2px 8px; border-radius:5px;">${x.sub}</span> <span style="background:#e3f2fd; padding:2px 8px; border-radius:5px;">${x.area}</span>`;
        
        // ØµÙˆØ±Ø© Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„ØªÙØ§ØµÙŠÙ„
        document.getElementById('mImg').src = x.img.replace('=s600','=s800');
        document.getElementById('mDesc').innerText = x.desc || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªØ§Ø­.';
        
        // Ù…ØªØ§Ø­
        document.getElementById('mLive').style.display = x.live ? 'flex' : 'none';

        // Ø¹Ø±Ø¶ Ø®Ø§Øµ
        const off = document.getElementById('mOffer');
        if(x.offer) { off.style.display='block'; document.getElementById('mOfferTxt').innerText = x.offer; }
        else off.style.display='none';

        // Ù„ÙˆÙƒÙŠØ´Ù†
        const loc = document.getElementById('mLoc');
        if(x.loc) { loc.style.display='block'; loc.href = x.loc; } else loc.style.display='none';

        document.getElementById('mCall').href = `tel:${x.ph}`;
        document.getElementById('mWa').href = `https://wa.me/${x.wa}`;
        document.getElementById('modal').style.display = 'block';
    }
    window.closeM = () => document.getElementById('modal').style.display = 'none';

    // Filters Logic
    window.setMain = (t, el) => {
        mainF = t; 
        document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('subCats').style.display = (t==='comm' || t==='all') ? 'block':'none';
        render();
    }
    window.setSub = (c, el) => {
        subF = c;
        document.querySelectorAll('.cat-chip').forEach(b=>b.classList.remove('active'));
        el.classList.add('active');
        render();
    }
    document.getElementById('search').addEventListener('input', render);

    init();
</script>
</body>
</html>
